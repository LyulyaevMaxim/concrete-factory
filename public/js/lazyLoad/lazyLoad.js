!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,n,r,o,c,a={},u=function(){},d=function(t){return null===t.offsetParent},l=function(t,e){if(d(t))return!1;var n=t.getBoundingClientRect();return n.right>=e.l&&n.bottom>=e.t&&n.left<=e.r&&n.top<=e.b},i=function(){(o||!n)&&(clearTimeout(n),n=setTimeout(function(){a.render(),n=null},r))};return a.init=function(n){var d=(n=n||{}).offset||0,l=n.offsetVertical||d,s=n.offsetHorizontal||d,f=function(t,e){return parseInt(t||e,10)};e={t:f(n.offsetTop,l),b:f(n.offsetBottom,l),l:f(n.offsetLeft,s),r:f(n.offsetRight,s)},r=f(n.throttle,250),o=!1!==n.debounce,c=!!n.unload,u=n.callback||u,a.render(),document.addEventListener?(t.addEventListener("scroll",i,!1),t.addEventListener("load",i,!1)):(t.attachEvent("onscroll",i),t.attachEvent("onload",i))},a.render=function(n){for(var r,o,d=(n||document).querySelectorAll("[data-src], [data-src-background]"),i=d.length,s={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},f=0;i>f;f++)o=d[f],l(o,s)?(c&&o.setAttribute("data-src-placeholder",o.src),null!==o.getAttribute("data-src-background")?o.style.backgroundImage="url("+o.getAttribute("data-src-background")+")":o.src!==(r=o.getAttribute("data-src"))&&(o.src=r),c||(o.removeAttribute("data-src"),o.removeAttribute("data-src-background")),u(o,"load")):c&&(r=o.getAttribute("data-src-placeholder"))&&(null!==o.getAttribute("data-src-background")?o.style.backgroundImage="url("+r+")":o.src=r,o.removeAttribute("data-src-placeholder"),u(o,"unload"));i||a.detach()},a.detach=function(){document.removeEventListener?t.removeEventListener("scroll",i):t.detachEvent("onscroll",i),clearTimeout(n)},a}),echo.init({offset:1e3,throttle:250,unload:!1});